---
title: "Nvidia-docker 딥러닝 개발환경 구"
date: 2019-03-15 00:00:00 -0900
categories: ML Engineer
---


Nvidia driver 설치
---------------
* nt800g5w-xd7s 모델 삼 노트북에 개발환경 구
  * GPU model : GP107M [GeForce GTX 1050 Mobile]
* Ubuntu 18.04 64bit 설치 환경
* $ ubuntu-drivers devices
* $ ubuntu-drivers autoinstall
* 기존에 설치된 Nvidia 드라이버 삭제가 필요할 경우
  * sudo apt-get remove --purge nvidia-*


Nvidia-docker 설치
---------------

1. Installing Docker Engine
------
* $ sudo wget -qO- https://get.docker.com/ | sh
* $ sudo usermod -aG docker $USER
* 권한 설정 반영을 위해 리부팅 (필수 인가?)
* $ docker run hello-world

2. Installing Docker Compose
------
* $ sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose
* $ sudo chmod +x /usr/local/bin/docker-compose
* $ sudo docker-compose --version

3. Installing Nvidia-docker
------
* $ curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | \
  sudo apt-key add -
distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
* $ curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | \
  sudo tee /etc/apt/sources.list.d/nvidia-docker.list
* $ sudo apt-get update
* $ sudo apt-get install nvidia-docker2 
* $ sudo pkill -SIGHUP dockerd
* nvidia-docker 동작 확인
  * $ docker run --runtime=nvidia --rm nvidia/cuda:9.0-base nvidia-smi
  * $ docker run --runtime=nvidia --rm nvidia/cuda nvidia-smi

4. Tensorflow GPU 테스트
------
* dockerhub에서 tensorflow tag 확인
  * tag 예시: latest-gpu-py3-jupyter
* $ docker run --runtime=nvidia -it -p 8888:8888 tensorflow/tensorflow:latest-gpu-py3-jupyter
  * 설치된 nvidia-XXX 버전 호환성에 따라 실행 에러가 발생할 수 있음
 

Dockerfile을 이용한 이미지 만들기
---------------
* python package 관리를 어떻게 할 것인가?
  * Todo
  
  
  
Docker Hub를 이용한 이미지 자동 빌드
---------------
* 이미지 관리를 어떻게 할 것인가?




